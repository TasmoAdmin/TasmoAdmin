/*!
 * jQuery Internationalization library
 *
 * Copyright (C) 2012 Santhosh Thottingal
 *
 * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do
 * anything special to choose one license or the other and you don't have to
 * notify anyone which license you are using. You are free to use
 * UniversalLanguageSelector in commercial projects as long as the copyright
 * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.
 *
 * @licence GNU General Public Licence 2.0 or later
 * @licence MIT License
 */
!function(e){"use strict";var n,a,t=Array.prototype.slice;(a=function(n){this.options=e.extend({},a.defaults,n),this.parser=this.options.parser,this.locale=this.options.locale,this.messageStore=this.options.messageStore,this.languages={},this.init()}).prototype={init:function(){var n=this;String.locale=n.locale,String.prototype.toLocaleString=function(){var a,t,o,i,l,r,s;for(o=this.valueOf(),i=n.locale,l=0;i;){t=(a=i.split("-")).length;do{if(r=a.slice(0,t).join("-"),s=n.messageStore.get(r,o))return s;t--}while(t);if("en"===i)break;i=e.i18n.fallbacks[n.locale]&&e.i18n.fallbacks[n.locale][l]||n.options.fallbackLocale,e.i18n.log("Trying fallback locale for "+n.locale+": "+i+" ("+o+")"),l++}return""}},destroy:function(){e.removeData(document,"i18n")},load:function(n,a){var t,o,i,l={};if(n||a||(n="i18n/"+e.i18n().locale+".json",a=e.i18n().locale),"string"==typeof n&&"json"!==n.split("?")[0].split(".").pop()){for(l[a]=n+"/"+a+".json",t=(e.i18n.fallbacks[a]||[]).concat(this.options.fallbackLocale),o=0;o<t.length;o++)l[i=t[o]]=n+"/"+i+".json";return this.load(l)}return this.messageStore.load(n,a)},parse:function(n,a){var t=n.toLocaleString();return this.parser.language=e.i18n.languages[e.i18n().locale]||e.i18n.languages.default,""===t&&(t=n),this.parser.parse(t,a)}},e.i18n=function(n,o){var i,l=e.data(document,"i18n"),r="object"==typeof n&&n;return r&&r.locale&&l&&l.locale!==r.locale&&(String.locale=l.locale=r.locale),l||(l=new a(r),e.data(document,"i18n",l)),"string"==typeof n?(i=void 0!==o?t.call(arguments,1):[],l.parse(n,i)):l},e.fn.i18n=function(){var n=e.data(document,"i18n");return n||(n=new a,e.data(document,"i18n",n)),String.locale=n.locale,this.each((function(){var a,t,o,i,l=e(this),r=l.data("i18n");r?(a=r.indexOf("["),t=r.indexOf("]"),-1!==a&&-1!==t&&a<t?(o=r.slice(a+1,t),i=r.slice(t+1),"html"===o?l.html(n.parse(i)):l.attr(o,n.parse(i))):l.text(n.parse(r))):l.find("[data-i18n]").i18n()}))},String.locale=String.locale||e("html").attr("lang"),String.locale||(void 0!==typeof window.navigator?(n=window.navigator,String.locale=n.language||n.userLanguage||""):String.locale=""),e.i18n.languages={},e.i18n.messageStore=e.i18n.messageStore||{},e.i18n.parser={parse:function(e,n){return e.replace(/\$(\d+)/g,(function(e,a){var t=parseInt(a,10)-1;return void 0!==n[t]?n[t]:"$"+a}))},emitter:{}},e.i18n.fallbacks={},e.i18n.debug=!1,e.i18n.log=function(){window.console&&e.i18n.debug&&window.console.log.apply(window.console,arguments)},a.defaults={locale:String.locale,fallbackLocale:"en",parser:e.i18n.parser,messageStore:e.i18n.messageStore},e.i18n.constructor=a}(jQuery);